/*
 * This file was generated by the Gradle 'init' task.
 *
 * The settings file is used to specify which projects to include in your build.
 * 
 * Detailed information about configuring a multi-project build in Gradle can be found
 * in the user guide at https://docs.gradle.org/4.9/userguide/multi_project_builds.html
 */

rootProject.name = 'waka-waki'

// 所有子目录中的gradle文件
FileTree candidateFiles = fileTree(rootDir) {
    include '**/*.gradle'
    exclude '**/gradle', 'settings.gradle', '/build.gradle'
}

// 自发现module
String rootDirPath = rootDir.absolutePath + File.separator
candidateFiles.each { File candidateFile ->
    if (candidateFile.name == 'build.gradle') {
        String buildFilePath = candidateFile.parentFile.absolutePath
        String module = buildFilePath.replace(rootDirPath, '').replaceAll(File.separator, ':')
        include module
        print "detect module ${module}"
    }
}
